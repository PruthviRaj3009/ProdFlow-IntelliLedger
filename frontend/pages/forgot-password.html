<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reset Your Password â€” ProdFlow-IntelliLedger</title>

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/base.css" />
  <link rel="stylesheet" href="../css/components.css" />
  <link rel="stylesheet" href="../css/forgot-password.css" />
</head>
<body>
  <!--
    Forgot Password (UI-only)
    - No backend
    - No APIs
    - Simulated OTP: 123456

    Purpose:
    Allow users to reset password using OTP verification.
  -->

  <main class="pf-forgot-shell">
    <section class="pf-forgot-card" aria-label="Reset your password">
      <header class="pf-forgot-header">
        <div class="pf-forgot-brand">
          <div class="pf-forgot-mark" aria-hidden="true"></div>
          <div>
            <div class="pf-forgot-app">ProdFlow-IntelliLedger</div>
            <div class="pf-forgot-tag">Production &amp; Ledger Console</div>
          </div>
        </div>

        <h1 class="pf-forgot-title">Reset Your Password</h1>
        <p class="pf-forgot-subtitle">Verify your identity to reset your password.</p>
      </header>

      <!-- Global feedback -->
      <div id="fpSuccess" class="pf-alert pf-alert--success" role="status" aria-live="polite" hidden>
        Password reset successfully. Please log in.
      </div>
      <div id="fpError" class="pf-alert" role="alert" aria-live="polite" hidden></div>

      <!-- Step 1: Identify -->
      <section id="stepIdentify" class="pf-step" aria-label="Step 1: Identify">
        <div class="pf-step__meta">
          <div class="pf-step__pill">Step 1 of 3</div>
          <div class="pf-step__label">User Identification</div>
        </div>

        <form id="identifyForm" novalidate>
          <div class="pf-field">
            <label class="pf-label" for="identifier">Registered Email or Mobile Number</label>
            <input
              id="identifier"
              class="pf-input"
              inputmode="email"
              autocomplete="username"
              placeholder="email@example.com or +91 XXXXX XXXXX"
              required
            />
            <div id="identifierMsg" class="pf-inline-msg" aria-live="polite"></div>
          </div>

          <button id="sendOtpBtn" class="pf-btn pf-btn--primary" type="submit" disabled>Send OTP</button>
        </form>
      </section>

      <!-- Step 2: OTP (hidden until step 1 completes) -->
      <section id="stepOtp" class="pf-step" aria-label="Step 2: OTP Verification" hidden>
        <div class="pf-step__meta">
          <div class="pf-step__pill">Step 2 of 3</div>
          <div class="pf-step__label">OTP Verification</div>
        </div>

        <form id="otpForm" novalidate>
          <div class="pf-field">
            <label class="pf-label" for="otp">Enter 6-digit OTP</label>
            <div class="pf-otp" aria-label="OTP input">
              <input class="pf-otp__box" inputmode="numeric" maxlength="1" aria-label="OTP digit 1" />
              <input class="pf-otp__box" inputmode="numeric" maxlength="1" aria-label="OTP digit 2" />
              <input class="pf-otp__box" inputmode="numeric" maxlength="1" aria-label="OTP digit 3" />
              <input class="pf-otp__box" inputmode="numeric" maxlength="1" aria-label="OTP digit 4" />
              <input class="pf-otp__box" inputmode="numeric" maxlength="1" aria-label="OTP digit 5" />
              <input class="pf-otp__box" inputmode="numeric" maxlength="1" aria-label="OTP digit 6" />
            </div>

            <div class="pf-otp__row">
              <div class="pf-muted" style="font-size:12px;">
                <span id="resendLabel">Resend OTP in</span>
                <strong><span id="timer">30</span>s</strong>
              </div>
              <button id="resendBtn" class="pf-link-btn" type="button" disabled>Resend OTP</button>
            </div>

            <div id="otpMsg" class="pf-inline-msg" aria-live="polite"></div>
          </div>

          <button id="verifyOtpBtn" class="pf-btn pf-btn--primary" type="submit" disabled>Verify OTP</button>
        </form>
      </section>

      <!-- Step 3: Reset password (hidden until OTP verified) -->
      <section id="stepReset" class="pf-step" aria-label="Step 3: Reset Password" hidden>
        <div class="pf-step__meta">
          <div class="pf-step__pill">Step 3 of 3</div>
          <div class="pf-step__label">Reset Password</div>
        </div>

        <form id="resetForm" novalidate>
          <div class="pf-field">
            <label class="pf-label" for="newPassword">New Password</label>
            <input id="newPassword" class="pf-input" type="password" autocomplete="new-password" required />
            <ul class="pf-rules" aria-label="Password rules">
              <li id="rLen" class="pf-rules__item">Minimum 8 characters</li>
              <li id="rUpper" class="pf-rules__item">1 uppercase letter</li>
              <li id="rNum" class="pf-rules__item">1 number</li>
              <li id="rSpecial" class="pf-rules__item">1 special character</li>
            </ul>
            <div id="pwdMsg" class="pf-inline-msg" aria-live="polite"></div>
          </div>

          <div class="pf-field">
            <label class="pf-label" for="confirmPassword">Confirm New Password</label>
            <input id="confirmPassword" class="pf-input" type="password" autocomplete="new-password" required />
            <div id="matchMsg" class="pf-inline-msg" aria-live="polite"></div>
          </div>

          <button id="resetBtn" class="pf-btn pf-btn--primary" type="submit" disabled>Reset Password</button>
        </form>

        <div class="pf-forgot-footer">
          <a class="pf-back" href="../index.html">Back to Sign In</a>
        </div>
      </section>

      <footer class="pf-forgot-legal">
        <small>Security tip: Never share OTPs. Support will never ask for your password.</small>
      </footer>
    </section>
  </main>

  <script src="../js/utils.js"></script>
  <script src="../js/forgot-password.js"></script>
</body>
</html>
